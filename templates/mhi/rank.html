<style>
/* ===========================
   ğŸ“Œ Tooltip Container
=========================== */
.tooltip-container {
    position: relative;
    display: inline-block;
    cursor: pointer;
    font-weight: 600;
}

/* ê¸°ë³¸ í…ìŠ¤íŠ¸ hover íš¨ê³¼ */
.tooltip-container:hover {
    color: #0d6efd;
}

/* ===========================
   ğŸ“Œ Tooltip Box
=========================== */
.tooltip-text {
    visibility: hidden;
    opacity: 0;
    width: 240px;
    background: #212529;
    color: #fff;
    text-align: left;
    padding: 10px 14px;
    border-radius: 8px;
    font-size: 0.8rem;

    /* ë§í’ì„  ìœ„ì¹˜ */
    position: absolute;
    z-index: 999;
    top: 130%;
    left: 105%;
    transform: translateX(-50%);

    /* ë¶€ë“œëŸ¬ìš´ íš¨ê³¼ */
    transition: opacity 0.25s ease, visibility 0.25s ease;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);

    /* ë§í’ì„  ì‚¼ê°í˜• */
}
.tooltip-text::after {
    content: "";
    position: absolute;
    top: -6px;
    left: 50%;
    transform: translateX(-50%);
    border-width: 6px;
    border-style: solid;
    border-color: transparent transparent #212529 transparent;
}

/* Hover ì‹œ ë³´ì„ */
.tooltip-container:hover .tooltip-text {
    visibility: visible;
    opacity: 1;
}
</style>




<div class="container mt-4">
    <h4 class="mb-3">
        <span class="tooltip-container">
            ğŸ“Œ ìœ ìƒ¤ê·¸ë£¹ ìµœì¢… ì•„ì´í…œ ì¶”ì²œ 
            <span class="tooltip-text">
                ìœ ìƒ¤ê·¸ë£¹(ë³¸ì¸ë‚˜ì´Â±5, ë™ì¼ì„±ë³„)ì´ êµ¬ë§¤í•œ ì•„ì´í…œì¤‘ì— ê°€ì¤‘ì¹˜(í‰ì =0.5, êµ¬ë§¤ìˆ˜=0.2, ë¦¬ë·°ìˆ˜=0.3)ë¥¼ í†µí•œ ìµœì¢…ì•„ì´í…œ ì¶”ì²œ
            </span>
        </span>
    </h4>


    <div class="row row-cols-2 row-cols-md-6 g-3">

        {% set filtered = weighted_recommendations_list | selectattr('item_reviewcnt', '>=', 50) | list %}

        {% if filtered %}
            {% for item in filtered[:6] %}
                {% set item_url = "/" ~ ((item.item_category - 9) // 10) ~ "/" ~ item.item_id %}

                <div class="col">
                    <a href="{{ item_url }}" style="text-decoration: none; color: inherit;">
                        <div class="card h-100 shadow-sm" style="width: 100%;">

                            <!-- ì´ë¯¸ì§€ -->
                            {% if item.item_img and item.item_img.endswith(".png") %}
                                <img src="{{ url_for('static', filename='img/_item/' + item.item_img) }}"
                                     class="card-img-top"
                                     style="height: 150px; object-fit: cover;">
                            {% elif item.item_img %}
                                <img src="{{ item.item_img }}"
                                     class="card-img-top"
                                     style="height: 150px; object-fit: cover;">
                            {% else %}
                                <div style="height:150px;background:#f8f9fa;display:flex;align-items:center;justify-content:center;color:#6c757d;">
                                    No Image
                                </div>
                            {% endif %}

                            <!-- ìƒí’ˆëª… -->
                            <div class="card-body p-2">
                                <h6 class="card-title" style="font-size: 0.85rem; height: 38px; overflow: hidden;">
                                    {{ item.product_name }}
                                </h6>
                            </div>

                            <!-- ê°€ê²©/í‰ì  -->
                            <div class="card-footer text-center p-1">
                                <small class="text-muted d-block" style="font-size: 0.75rem;">
                                    <span class="fw-bold text-success">{{ "{:,}".format(item.item_price|int) }}ì›</span>
                                </small>
                                <small class="text-muted d-block" style="font-size: 0.75rem;">
                                    â­ {{ item.item_rate|float|round(2) }}ì 
                                </small>
                                <small class="text-muted d-block" style="font-size: 0.75rem;">
                                    ë¦¬ë·° {{ item.item_reviewcnt }}ê°œ
                                </small>
                            </div>
                        </div>
                    </a>
                </div>

            {% endfor %}

        {% else %}
            <div class="col-12">
                <div class="alert alert-secondary">ì¶”ì²œ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</div>
            </div>
        {% endif %}

    </div>
</div>
